# Calendar plugin: gogcli (Google Workspace CLI) + cal-cli (CalDAV)
RUN which gog >/dev/null 2>&1 || curl -sL "https://github.com/steipete/gogcli/releases/download/v0.9.0/gogcli_0.9.0_linux_amd64.tar.gz" | tar -xz -C /usr/local/bin gog

# Build cal-cli for CalDAV support (iCloud, Nextcloud, Fastmail)
COPY plugins/calendar/cal-cli/ /opt/cal-cli/
RUN cd /opt/cal-cli && npm install && npm run build && npm prune --omit=dev && rm -rf src/ tsconfig.json
